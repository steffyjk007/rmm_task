<!DOCTYPE html>
<html>
<head>
    <title>Device List</title>
</head>
<body>
    <h1>Device List</h1>
    <table>
        <thead>
            <tr>
                <th>Device Name</th>
                <th>Status</th>
                <th>Last Update Time</th>
            </tr>
        </thead>
        <tbody>
            {% for device in device_list %}
                <tr>
                    <td>{{ device.device_name }}</td>
                    <td>{{ device.status }}</td>
                    <td>{{ device.last_update_time }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- WebSocket Notification Container -->
    <div id="notification-container"></div>

    <!-- JavaScript for WebSocket Notification -->
    <script>
        const socket = new WebSocket('ws://yourserver/ws/devices/updates/');

        // Handle WebSocket connection opening
        socket.addEventListener('open', (event) => {
            console.log('WebSocket connection opened:', event);
        });

        // Handle WebSocket messages
        socket.addEventListener('message', (event) => {
            const data = JSON.parse(event.data);
            console.log('Received message:', data);

            // Handle the notification data here
            const notificationMessage = data.message;
            displayNotification(notificationMessage);
        });

        // Handle WebSocket errors
        socket.addEventListener('error', (error) => {
            console.error('WebSocket error:', error);
        });

        // Handle WebSocket connection closing
        socket.addEventListener('close', (event) => {
            console.log('WebSocket connection closed:', event);
        });

        // Function to display the notification in your UI
        function displayNotification(message) {
            // Replace this with your actual notification handling logic
            const notificationContainer = document.getElementById('notification-container');
            const notificationElement = document.createElement('div');
            notificationElement.textContent = message;
            notificationContainer.appendChild(notificationElement);
        }
    </script>
</body>
</html>
